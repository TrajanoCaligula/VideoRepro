<!DOCTYPE html>
<html>
    <head>
        <title>Fichero para pruebas REST</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>

    </head>
    <body>  
        <form id="myForm">
            <!-- Aquí tus campos de formulario -->
            <input type="text" id="videoID" name="videoID">
            <button type="submit">Enviar PUT</button>
        </form>

        <script>
        document.getElementById('myForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Evitar el comportamiento predeterminado del formulario

            var formData = new FormData(this);

            fetch('http://localhost:8080/REST/resources/jakartaee9/updateViews?videoID=1', {
                method: 'PUT',
                headers: {
                    // Aquí puedes establecer los encabezados necesarios, como Content-Type
                },
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al realizar la solicitud PUT');
                }
                // Aquí puedes manejar la respuesta de la solicitud si es necesario
                return response.json();
            })
            .then(data => {
                // Aquí puedes manejar la respuesta JSON devuelta por la solicitud PUT
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
        </script>
        <form action="resources/jakartaee9/getInfo" method="get">
            <label>Informaci&oacute;n</label>
            <input type="text" name="videoID"/>
            <label>Fecha</label>
            <input type="text" name="date"/>
            <input type="submit" name="submit" value="Enviar con GET"/>
        </form>        
        
        <form action="http://localhost:8080/REST/resources/jakartaee9/postSearch" method="post">
            <label>Buscar</label>             
            <label>filtrar por</label>
                        <label for="title">Title:</label>
                        <input  type="text" id="title" name="title">
                        <label for="author">Author:</label>
                        <input  type="text" id="author" name="author">
                        <label for="day">Day:</label>
                        <select id="day" name="day">
                                <option>----</option>
                            </select>
                        <label for="month">Month:</label>
                        <select id="month" name="month">
                            <option>----</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option>
                            <option>10</option>
                            <option>11</option>
                            <option>12</option>
                        </select>
                        <label for="year">Year:</label>
                        <select id="year" name="year">
                                <option>----</option>
                        </select>
            <input type="submit" name="submit" value="Enviar con POST"/>
        </form>
        
        
        
    <div id="info"></div>


    <script>
        // Función para hacer la llamada AJAX
        function llamarServicioREST(videoID) {
            axios.get('http://localhost:8080/REST/resources/jakartaee9/getInfo?videoID=' + videoID)
                .then(function (response) {
                    document.getElementById("info").innerText = JSON.stringify(response.data);
                })
                .catch(function (error) {
                    console.error('Hubo un problema con la solicitud:', error);
                });
        }

        // Llamar a la función cuando se cargue la página
        llamarServicioREST("1");
        
             // Obtener el select de días
     var selectDias = document.getElementById("day");

     // Añadir opciones al select
     for (var i = 1; i <= 31; i++) {
         var option = document.createElement("option");
         option.text = i;
         option.value = i;
         selectDias.add(option);
     }
     var selectDias = document.getElementById("year");

     // Añadir opciones al select
     for (var i = 1; i <= 200; i++) {
         var option = document.createElement("option");
         option.text = i+1824;
         option.value = i;
         selectDias.add(option);
     }
    </script>

    </body>    
</html>

